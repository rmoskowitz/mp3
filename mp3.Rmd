---
title: "Something In-Tents Mp3"
author: Rachel Moskowitz, Sonia Garfinkel, and Greta Mundt
output: 
  html_document:
    df_print: paged
    code_folding: hide
    theme: "journal"
---

#####Problem statement: 
MacLeish currently only has two campsites, one large group site close to the building, and a remote campsite with two tent platforms a mile away. There is a need for an additional campsite at the field station. There is an interest in developing a new campsite half a mile away from the parking area, within 200' of a stream or water source, 500' away from any research area or Challenge Course element, in a forest unlike the forest of the other two campsites, and relatively flat. All of these components must be present in a new campsite for consideration.


#####Campsite recommendation
Our project proposese two new potential campsite locations for MacLeish. Our final recommendations for new campsite locations are shown in our map below with blue pop up identifiers. We used a github repository in order to keep track of and evaluate the spatial data necessary for making our recommendations [^1]. These locations were chosen based on the following criteria and spatial analysis procedures.
1. Campsites must be located in a forest unlike the forest of the other two campsites. The existing campsites are located in an Old Field White Pine Forest and a Sugar Maple Forest, which can be found by clicking on the vegetation near these popups on the map below. We knew we could not place our new proposed campsites in either of these vegetation types. The limited our proposed campsites. We chose to place these campsites within the (name two other vegetation types)
2. water source buffer info
3. research and challenge course info
4. away from parking lot info
5. relatively flat info
How we came to our final decision


```{r,  message = FALSE, warning = FALSE}
library(tidyverse)
library(sf)
library(macleish)
library(leaflet)
```

```{r}
#here we added new data points to our workflow
group_campsite1 <- data.frame(lat = 42.450976, lon = -72.678154)
group_campsite2 <-data.frame(lat = 42.458549, lon = -72.679581)
parking_lot <-data.frame(lat = 42.448013, lon = -72.680663)

#how we changed them into spatial objects... sf process?
#use st_sf()????

#transforming data.frame to an sf object


parking_sf <- parking_lot %>%
  st_as_sf(coords = c("lat", "lon")) %>%
  st_transform(4326)

```

```{r}
#transform the points to match the macleish crs
df_crs <- st_transform(df_sf, crs = crs(manhattan, asText = TRUE))

#buffer the point
df_buf <- st_buffer(df_crs, dist = 1000)
```

```{r}
#decimal degrees to feet in order to correctly buffer
stream_buffer <- macleish_layers[["streams"]] %>%
  st_buffer(dist = 0.000549) %>%
  st_transform(4326)

leaflet() %>%
  addTiles() %>%
  addPolylines(data = macleish_layers[["streams"]], 
               weight = 1, color = "black") %>%
  addPolygons(data = stream_buffer) 


research_buffer <- macleish_layers[["research"]] %>%
  st_buffer(dist = 0.001371)

challenge_buffer <- macleish_layers[["challenge_courses"]] %>%
  st_buffer(dist = 0.001371)

parking_buffer <- parking_sf 

plot(stream_buffer)
#try to convert decimal degrees... to 200' 
#500' buffer from any research area or any element of the challenge course

#new_parking_lot <- st_as_sf(parking_lot)
  #st_buffer(dist = 0.5)
  
  #how to buffer the parking lot??
```


```{r}
#define color palettes (for forest & for wetlands...)
wetland_pal <- colorNumeric("viridis", 
                  macleish_layers[["wetlands"]]$SHAPE_AREA)
```

```{r}
#interactive leaflet map w/ macleish_layers and own data added
leaflet() %>%
  addTiles() %>%

  #how we showed the vegetation type with popups..
  addPolygons(data = macleish_layers[["forests"]], color = "green", opacity = 5,  weight = 1, popup = ~Sheet1__Na) %>%
  
  #how we showed the wetlands 
   addPolygons(data = macleish_layers[["wetlands"]], 
              color = "blue", 
              fillOpacity = 0.8, weight = 0.1, 
              popup = ~IT_VALDESC) %>%
  
    addPolygons(data = macleish_layers[["research"]], color = "red", weight = 1, opacity = 2) %>%
  addCircleMarkers(data = macleish_layers[["challenge_courses"]], color = "red", weight = 1, opacity = 2) %>%
  
  addPolylines(data = macleish_layers[["trails"]], color = "brown", weight = 1) %>%
  
  addPolylines(data = macleish_layers[["streams"]], color = "blue", weight = 3) %>%
  
  addPolygons(data = macleish_layers[["boundary"]], stroke = TRUE, color = "black", fill = NA, weight = 2, opacity = 2) %>%
  
  addPolylines(data = macleish_layers[["contours_3m"]], color = "black", weight = 1) %>%
  
  addMarkers(lng = ~lon, lat = ~lat, data = group_campsite1, popup = "Current Group Campsite") %>%
  
  addMarkers(lng= ~lon, lat = ~lat, data = parking_lot, popup = "MacLeish Parking Lot") %>%
  
  addMarkers (lng = ~lon, lat = ~lat, data = group_campsite2, popup = "Current Group Campsite (Remote)") %>%
  
  addPolygons(data = stream_buffer)  %>%
  addPolygons(data = research_buffer, color = "red") %>% addPolygons(data = challenge_buffer, color = "red")
  
  
```

Notes for map: add legend ( addLegend("bottomright", 
    title = "MacLeish Layers",
    opacity = 1) ??) --> try to simplify as much as possible 


#####Resources necessary to implement this recommendation
- These two campsites will cost
- This will take....
- Concerns about environmental impact
- major roadblocks...


- Include relevant external information (look at macleish info)


[^1]: [Link to github repository](https://github.com/rmoskowitz/mp3)